---
import type { ImageBlockObjectResponse } from "@notionhq/client/build/src/api-endpoints";
import { richTextToUnformattedString } from "../../../lib/notion";
import NotionImage from "../common/NotionImage.astro";
import RichText from "../common/RichText.astro";

export interface Props {
  block: ImageBlockObjectResponse;
}

const { block } = Astro.props;

const captionPlain = richTextToUnformattedString(block.image.caption);
---

<figure>
  <NotionImage id={block.id} image={block.image} alt={captionPlain} />
  <figcaption>
    <RichText components={block.image.caption} />
  </figcaption>
</figure>
