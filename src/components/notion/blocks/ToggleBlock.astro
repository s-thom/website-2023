---
import type { ToggleBlockObjectResponse } from "@notionhq/client/build/src/api-endpoints";
import { getBlockChildren } from "../../../lib/notion";
import RichText from "../common/RichText.astro";
import NotionRenderer from "./NotionRenderer.astro";

export interface Props {
  block: ToggleBlockObjectResponse;
}

const { block } = Astro.props;

const children = block.has_children ? await getBlockChildren(block.id) : [];
---

<details>
  <summary>
    <RichText components={block.toggle.rich_text} />
  </summary>
  {
    children.length > 0 ? (
      <div class="flow">
        <NotionRenderer blocks={children} />
      </div>
    ) : undefined
  }
</details>
