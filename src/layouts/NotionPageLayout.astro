---
import type {
  DatabaseObjectResponse,
  PageObjectResponse,
} from "@notionhq/client/build/src/api-endpoints";
import DevOnly from "../components/DevOnly.astro";
import type { PageMetaType } from "../components/PageMeta.astro";
import type { LinkInfo } from "../components/SiteHeader.astro";
import SkipLinks from "../components/SkipLinks.astro";
import NotionPageHeader from "../components/notion/NotionPageHeader.astro";
import NotionBackdrop from "../components/notion/common/NotionBackdrop.astro";
import PageWithHeaderLayout from "./PageWithHeaderLayout.astro";

export interface Props {
  page: DatabaseObjectResponse | PageObjectResponse;
  meta: PageMetaType;
  breadcrumbs?: LinkInfo[];
}

const { page, meta, breadcrumbs } = Astro.props;
---

<PageWithHeaderLayout meta={meta} breadcrumbs={breadcrumbs}>
  <SkipLinks links={[{ name: "Content", url: "#content" }]} slot="skip-links" />

  <NotionPageHeader page={page} slot="page-header" />
  <NotionBackdrop page={page} shade slot="page-backdrop" />

  <DevOnly>
    <div id="DEV-notion-page-id" style={{ display: "none" }}>{page.id}</div>
  </DevOnly>
  <article class="flow">
    <div id="content"></div>
    <slot />
  </article>

  <slot name="page-footer" />
</PageWithHeaderLayout>

<style></style>
